SpaceWire. Общее.

*Note* Последующие выкладки должны быть актуальны для SpW на м/сх от АО "НПЦ "ЭЛВИС".
Для остальных - не знаю.

#spacewire

### Ссылки

1. https://elvees.ru/mc/data_sheets/SpaceWire_ECSS-E-ST-50-12C.pdf
2. TBU

### Материалы

1. ПРИМЕНЕНИЕ ПРОЦЕССОРОВ СЕРИИ «МУЛЬТИКОР» РЕКОМЕНДАЦИИ ПО РАБОТЕ С КАНАЛАМИ SPACEWIRE
2. SpaceWire_ECSS-E-ST-50-12C
3. SpaceWire_ECSS-E-ST-50-12C rev.1

### Установка соединения

Для установки соединения необходимо, чтобы один порт начал посылать в канал служебные
символы и принимать поток ответных служебных символов.

*Note* Для работы Autostart требуется, чтобы кто-то инициировал передачу служебных символов.
В этом режиме порт SpW не передает служебные символы, пока сам их не получит.

### Служебные символы

| Символ | Описание |
| --------- | --------- |
| NULL | Служебный символ, передаваемый всегда, когда не передаются данные или другие управляющие коды/служебные символы. Необходим для поддержания соединения (и определения разрыва соединения) |
| FCT (flow control token) | Слово, указывающее передатчику, что еще есть место под N байт. На каждые 8*N принимаемых байт, приёмник отправляет N FCT, N=1..16|
| EOP (normal end of packet) | Служебный символ, сообщающий о корректном завершении пакета |
| EEP (error end of packet) | Служебный символ, сообщающий об ошибочном завершении пакета |

##### FCT

| P | 1 | 0 | 0 | - вид FCT, где P-parity bit

##### Коды распределенных прерываний (distributed interrupts)

Коды распределенных прерываний ходят поверх данных, что позволяет принимать коды даже в случае,
когда приёмные буферы забиты. Это позволяет увести приёмник кодов прерывание и выполнить какие-то
операции. Например, перезагрузить канал.

* Есть вещь опциональная
* Есть два режима:
    * без подтверждений;
    * с подтверждением.
