#c #pointers

# Ссылки:

1. http://grep.cs.msu.ru/givi.olnd.ru/kr2/05.html

# Заметки

## Введение

**Указатель** - переменная, содержащая адрес переменной. Указатели и массивы тесно связаны.

## Указатели и адреса

Унарный оператор `&` выдает адрес объекта:

```
    int var = 123;
    int *pVar = &var;
    printf("var = %d; pVar = %p; *pVar = %d\n", var, pVar, *pVar);

    # var = 123; pVar = 0x7ffff374747c; *pVar = 123
```

Т.е. оператор присваивает адрес ячейки `var` переменной `pVar` (говорят, что p указывает на
с или, что то же, p ссылается на c). Оператор & применяется только к объектам, расположенным
в памяти: к переменным и элементам массивов. Его операндам не может быть ни выражение, ни константа, ни регистровая переменная.

Унарный оператор `*` есть оператор раскрытия ссылки. Примененный к указателю он выдает объект,
на который данный указатель ссылается.

```
    int x = 1, y = 2, *pInt;
    # x = 1; y = 2; pInt = 0x7fda457450a0

    pInt = &x;
    # x = 1; y = 2; pInt = 0x7fffe8fe9c38

    *pInt = 3;
    # x = 3; y = 2; pInt = 0x7fffe8fe9c38

    y = *pInt;
    # x = 3; y = 3; pInt = 0x7fffe8fe9c38
```

## Указатели и аргументы функций

В качестве примера рассматривается реализация `swap()`:

```
void swap(int *a, int *b) {
    int tmp = *a;
    *a = *b;
    *b = tmp;
}
```

Вызывающая программа передает адреса, `swap()` преобразует значения по этим адресам. В итоге,
вызывающая программа получает измененные значения.

## Указатели и массивы

См. `c/pointers/src/main.c`.

```
=======================
arrays
0 2 4 6 8 10 12 14 16 18
pa = 0x7fffe31910a0; *pa = 0; *pa + 2 = 2; *(pa + 2) = 4
0 2 4 6 8 10 12 14 16 18
a[4] = 8; *(a + 4) = 8
=======================
check_strlen
*s = 72
*s = 101
*s = 108
*s = 108
*s = 111
*s = 33
'Hello!' len = 6
```
